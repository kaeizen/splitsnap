<nz-list nzSize="small">
	@for (expense of expenses(); track expense.id) {
		<nz-list-item>
			<nz-collapse [nzBordered]="false" >
				<nz-collapse-panel [nzHeader]="expense.description" [nzExtra]="extraTpl">
					<div nz-flex [nzVertical]="true" >
						<p style="margin-bottom: 0;">{{ expense.date | date:'MMMM d, yyyy' }}</p>
						<nz-table nzTemplateMode>
							<thead>
								<tr>
									<th>Members</th>
									<th>Amount to pay</th>
									<th>Amount paid</th>
								</tr>
							</thead>
							<tbody>
								@for (member of members(); track member.id) {
									@if (expense.membersToPay[member.id] || expense.membersPaid[member.id]) {
									<tr>
										<td>{{ member.name }}</td>
										<td><span nzInputPrefix>₱</span> {{ (  member.id in expense.membersToPay ? expense.membersToPay[member.id].amount : 0 ) | number:'1.2-2' }}</td>
										<td><span nzInputPrefix>₱</span> {{ ( member.id in expense.membersPaid ? expense.membersPaid[member.id].amount : 0 ) | number:'1.2-2' }}</td>
									</tr>
									}
								}
							</tbody>
						</nz-table>
					</div>
				</nz-collapse-panel>
			</nz-collapse>
		</nz-list-item>
		<ng-template #extraTpl>
			<div nz-flex [nzGap]="4" nzAlign="center" (click)="$event.stopPropagation()">
			   <span><span nzInputPrefix>₱</span> {{ expense.amount | number:'1.2-2' }}</span>
			   <a nz-dropdown nzTrigger="click" [nzDropdownMenu]="menu">
				   <nz-icon nzType="more" nzTheme="outline" />
			   </a>
		   </div>
	   </ng-template>
	}
</nz-list>
<nz-dropdown-menu #menu="nzDropdownMenu">
	<ul nz-menu>
		<!-- <li nz-menu-item>Edit</li> -->
		<li nz-menu-item>Delete</li>
	</ul>
</nz-dropdown-menu>

